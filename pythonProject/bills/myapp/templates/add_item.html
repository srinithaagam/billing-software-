
{% extends 'base.html' %}
{% block title %}Add Bill{% endblock %}
{% block content %}
<h2 class="mb-4">➕ Add New Bill</h2>
<form method="post">
    {% csrf_token %}
    <div class="mb-3">
        <input type="text" name="customer_name" class="form-control" placeholder="Customer Name" value="{{ customer_name }}" required {% if customer_name %}readonly{% endif %}>
    </div>
    <div class="row g-2">
        <div class="col">
            <input type="text" name="material" class="form-control" placeholder="Material" required>
        </div>
        <div class="col">
            <input type="number" name="quantity" class="form-control" step="0.01" placeholder="Quantity (kg)" required>
        </div>
        <div class="col">
            <input type="number" name="rate" class="form-control" step="0.01" placeholder="Rate (Rs/kg)" required>
        </div>
    </div>
    <div class="mt-3 text-end">
        <button type="submit" class="btn btn-success">➕ Add Item</button>
        <a href="{% url 'bill'  %}" class="btn btn-primary">➡️ Finalize Bill</a>
    </div>
</form>

{% if items %}
<h4 class="mt-4">🧾 Current Items</h4>
<table class="table table-bordered">
    <thead class="table-light">
        <tr>
            <th>#</th>
            <th>Material</th>
            <th>Qty</th>
            <th>Rate</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody>
        {% for item in items %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ item.material }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.rate }}</td>
            <td>{{ item.total }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}
{% endblock %}
<!--&lt;!&ndash;<!DOCTYPE html>&ndash;&gt;-->
<!--&lt;!&ndash;<html>&ndash;&gt;-->
<!--&lt;!&ndash;<head>&ndash;&gt;-->
<!--&lt;!&ndash;    <title>Add New Item</title>&ndash;&gt;-->
<!--&lt;!&ndash;    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">&ndash;&gt;-->
<!--&lt;!&ndash;</head>&ndash;&gt;-->
<!--&lt;!&ndash;<body class="p-5">&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="container">&ndash;&gt;-->
<!--&lt;!&ndash;        <h2 class="mb-4">➕ Add New Material</h2>&ndash;&gt;-->
<!--&lt;!&ndash;        <form method="post" class="row g-3">&ndash;&gt;-->
<!--&lt;!&ndash;            {% csrf_token %}&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-md-6">&ndash;&gt;-->
<!--&lt;!&ndash;                <input type="text" name="customer_name" class="form-control" placeholder="Customer Name" required>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;                <input type="text" name="material" class="form-control" placeholder="Material" required>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;                <input type="number" step="0.01" name="quantity" class="form-control" placeholder="Quantity (kg)" required>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;                <input type="number" step="0.01" name="rate" class="form-control" placeholder="Rate (Rs/kg)" required>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;                <h4 class="mb-3">📋 Entered Items</h4>&ndash;&gt;-->
<!--&lt;!&ndash;    <table class="table table-bordered">&ndash;&gt;-->
<!--&lt;!&ndash;        <thead class="table-light">&ndash;&gt;-->
<!--&lt;!&ndash;        <tr>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>#</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Customer</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Material</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Qty (kg)</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Rate</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Total</th>&ndash;&gt;-->
<!--&lt;!&ndash;        </tr>&ndash;&gt;-->
<!--&lt;!&ndash;        </thead>&ndash;&gt;-->
<!--&lt;!&ndash;        <tbody>&ndash;&gt;-->
<!--&lt;!&ndash;        {% for item in items %}&ndash;&gt;-->
<!--&lt;!&ndash;        <tr>&ndash;&gt;-->
<!--&lt;!&ndash;            <td>{{ forloop.counter }}</td>&ndash;&gt;-->
<!--&lt;!&ndash;            <td>{{ item.customer_name }}</td>&ndash;&gt;-->
<!--&lt;!&ndash;            <td>{{ item.material }}</td>&ndash;&gt;-->
<!--&lt;!&ndash;            <td>{{ item.quantity }}</td>&ndash;&gt;-->
<!--&lt;!&ndash;            <td>{{ item.rate }}</td>&ndash;&gt;-->
<!--&lt;!&ndash;            <td>{{ item.total|floatformat:2 }}</td>&ndash;&gt;-->
<!--&lt;!&ndash;        </tr>&ndash;&gt;-->
<!--&lt;!&ndash;        {% endfor %}&ndash;&gt;-->
<!--&lt;!&ndash;        <tr class="table-success">&ndash;&gt;-->
<!--&lt;!&ndash;            <td colspan="5" class="text-end"><strong>Overall Total</strong></td>&ndash;&gt;-->
<!--&lt;!&ndash;            <td><strong>Rs {{ overall_total|floatformat:2 }}</strong></td>&ndash;&gt;-->
<!--&lt;!&ndash;        </tr>&ndash;&gt;-->
<!--&lt;!&ndash;        </tbody>&ndash;&gt;-->
<!--&lt;!&ndash;    </table>&ndash;&gt;-->

<!--&lt;!&ndash;    <div class="text-end">&ndash;&gt;-->
<!--&lt;!&ndash;        <a href="{% url 'bill' %}" class="btn btn-primary">➡️ View Full Bill</a>&ndash;&gt;-->
<!--&lt;!&ndash;        <a href="{% url 'index' %}" class="btn btn-secondary">🏠 Home</a>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-12 text-end">&ndash;&gt;-->
<!--&lt;!&ndash;                <a href="{% url 'new_bill' %}" class="btn btn-outline-danger">🗑️ Start New Bill</a>&ndash;&gt;-->

<!--&lt;!&ndash;                <button type="submit" class="btn btn-primary">💾 Save</button>&ndash;&gt;-->
<!--&lt;!&ndash;                <a href="{% url 'index' %}" class="btn btn-secondary">🏠 Home</a>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;        </form>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;</body>&ndash;&gt;-->
<!--&lt;!&ndash;</html>&ndash;&gt;-->

<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <title>Add New Item</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--</head>-->
<!--<body class="p-5">-->
<!--    <div class="container">-->
<!--        <h2 class="mb-4">➕ Add New Material</h2>-->

<!--        &lt;!&ndash; FORM &ndash;&gt;-->
<!--        <form method="post" class="row g-3 mb-4">-->
<!--    {% csrf_token %}-->

<!--    {% if not customer_name %}-->
<!--        <div class="col-md-6">-->
<!--            <input type="text" name="customer_name" class="form-control" placeholder="Customer Name" required>-->
<!--        </div>-->
<!--    {% else %}-->
<!--        <div class="col-md-6">-->
<!--            <input type="text" value="{{ customer_name }}" class="form-control" readonly>-->
<!--        </div>-->
<!--    {% endif %}-->

<!--    <div class="col-md-4">-->
<!--        <input type="text" name="material" class="form-control" placeholder="Material" required>-->
<!--    </div>-->
<!--    <div class="col-md-4">-->
<!--        <input type="number" step="0.01" name="quantity" class="form-control" placeholder="Quantity (kg)" required>-->
<!--    </div>-->
<!--    <div class="col-md-4">-->
<!--        <input type="number" step="0.01" name="rate" class="form-control" placeholder="Rate (Rs/kg)" required>-->
<!--    </div>-->

<!--    <div class="col-12 text-end">-->
<!--        <button type="submit" class="btn btn-primary">💾 Add</button>-->
<!--        <a href="{% url 'new_bill' %}" class="btn btn-outline-danger">🗑️ Start New Bill</a>-->
<!--        <a href="{% url 'index' %}" class="btn btn-secondary">🏠 Home</a>-->
<!--    </div>-->
<!--</form>-->


<!--        &lt;!&ndash; LIVE ENTERED ITEMS &ndash;&gt;-->
<!--        <h4 class="mb-3">📋 Entered Items</h4>-->
<!--        <table class="table table-bordered">-->
<!--            <thead class="table-light">-->
<!--                <tr>-->
<!--                    <th>#</th>-->
<!--                    <th>Customer</th>-->
<!--                    <th>Material</th>-->
<!--                    <th>Qty (kg)</th>-->
<!--                    <th>Rate</th>-->
<!--                    <th>Total</th>-->
<!--                </tr>-->
<!--            </thead>-->
<!--            <tbody>-->
<!--                {% for item in items %}-->
<!--                <tr>-->
<!--                    <td>{{ forloop.counter }}</td>-->
<!--                    <td>{{ item.customer_name }}</td>-->
<!--                    <td>{{ item.material }}</td>-->
<!--                    <td>{{ item.quantity }}</td>-->
<!--                    <td>{{ item.rate }}</td>-->
<!--                    <td>{{ item.total|floatformat:2 }}</td>-->
<!--                </tr>-->
<!--                {% endfor %}-->
<!--                <tr class="table-success">-->
<!--                    <td colspan="5" class="text-end"><strong>Overall Total</strong></td>-->
<!--                    <td><strong>Rs {{ overall_total|floatformat:2 }}</strong></td>-->
<!--                </tr>-->
<!--            </tbody>-->
<!--        </table>-->

<!--        &lt;!&ndash; OPTIONS &ndash;&gt;-->
<!--        <div class="text-end">-->
<!--            <a href="{% url 'bill' %}" class="btn btn-success">➡️ View Full Bill</a>-->
<!--        </div>-->
<!--    </div>-->
<!--</body>-->
<!--</html>-->